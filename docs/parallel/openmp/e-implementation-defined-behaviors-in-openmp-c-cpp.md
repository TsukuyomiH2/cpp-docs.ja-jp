---
title: E. OpenMP C/C++ の実装で定義されている動作
ms.date: 01/22/2019
ms.assetid: b8d660ca-9bb3-4b6b-87af-45c67d43a731
ms.openlocfilehash: e866eee9c6d85e93388f9f1d086badf948e2600e
ms.sourcegitcommit: 857fa6b530224fa6c18675138043aba9aa0619fb
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/24/2020
ms.locfileid: "80215047"
---
# <a name="e-implementation-defined-behaviors-in-openmp-cc"></a>E. OpenMP C/C++ の実装で定義されている動作

この付録では、この API で "実装定義" として記述されている動作の概要を説明します。  各動作は、メイン仕様の説明に相互参照されます。

## <a name="remarks"></a>解説

このような場合は、実装を定義してその動作を文書化する必要がありますが、この一覧は不完全になる可能性があります。

- **スレッド数:** スレッド数の動的調整が無効になっていて、並列領域に要求されたスレッドの数がランタイムシステムが提供できる数を超えている場合に、並列領域が検出されると、プログラムの動作は実装によって定義されます (ページ9を参照)。

   ビジュアルC++では、入れ子になっていない並列領域については、64スレッド (最大) が提供されます。

- **プロセッサ数:** 特定の時点でスレッドを実際にホストしている物理プロセッサの数は実装によって定義されます (ページ10を参照してください)。

   ビジュアルC++では、この数値は定数ではなく、オペレーティングシステムによって制御されます。

- **スレッドのチームの作成:** 入れ子になった並列領域を実行するチーム内のスレッドの数は実装によって定義されます (ページ10を参照してください)。

   ビジュアルC++では、この数値はオペレーティングシステムによって決定されます。

- **スケジュール (ランタイム):** スケジュール設定に関する決定は、実行時まで延期されます。 スケジュールの種類とチャンクサイズは、`OMP_SCHEDULE` 環境変数を設定することによって、実行時に選択できます。 この環境変数が設定されていない場合、結果のスケジュールは実装によって定義されます (ページ13を参照)。

   ビジュアルC++では、スケジュールの種類は、チャンクサイズのない `static` です。

- **既定のスケジュール設定:** Schedule 句を指定しない場合、既定のスケジュールは実装によって定義されます (ページ13を参照)。

   ビジュアルC++では、既定のスケジュールの種類は、チャンクサイズのない `static` です。

- **アトミック:** 実装では、すべての `atomic` ディレクティブを、同じ一意の名前を持つ `critical` ディレクティブに置き換えるかどうかを実装定義します (ページ20を参照)。

   ビジュアルC++で、 [atomic](reference/openmp-directives.md#atomic)によって変更されたデータが自然配置でない場合、または1バイトまたは2バイト長の場合、そのプロパティを満たすすべてのアトミック操作で1つのクリティカルセクションが使用されます。 それ以外の場合、クリティカルセクションは使用されません。

- **[omp_get_num_threads](3-run-time-library-functions.md#312-omp_get_num_threads-function):** ユーザーによってスレッドの数が明示的に設定されていない場合、既定値は実装によって定義されます (ページ9を参照)。

   ビジュアルC++では、スレッドの既定の数はプロセッサの数と同じです。

- **[omp_set_dynamic](3-run-time-library-functions.md#317-omp_set_dynamic-function):** 動的スレッド調整の既定値は実装によって定義されます。

   ビジュアルC++では、既定値は `FALSE`です。

- **[omp_set_nested](3-run-time-library-functions.md#319-omp_set_nested-function):** 入れ子になった並列処理が有効になっている場合、入れ子になった並列領域の実行に使用されるスレッドの数は実装によって定義されます。

   ビジュアルC++では、スレッドの数はオペレーティングシステムによって決定されます。

- 環境変数を[OMP_SCHEDULE](4-environment-variables.md#41-omp_schedule) : この環境変数の既定値は、実装によって定義されます。

   ビジュアルC++では、スケジュールの種類は、チャンクサイズのない `static` です。

- 環境変数の[OMP_NUM_THREADS](4-environment-variables.md#42-omp_num_threads) : `OMP_NUM_THREADS` 環境変数に値が指定されていない場合、または指定された値が正の整数でない場合、または値がシステムがサポートできるスレッドの最大数より大きい場合、使用するスレッドの数は実装によって定義されます。

   ビジュアルC++では、指定された値が0以下の場合、スレッド数はプロセッサの数と同じになります。  Value が64より大きい場合、スレッドの数は64です。

- [OMP_DYNAMIC](4-environment-variables.md#43-omp_dynamic)環境変数: 既定値は実装定義です。

   ビジュアルC++では、既定値は `FALSE`です。
