---
title: C26446
ms.date: 03/22/2018
ms.topic: reference
f1_keywords:
- C26446
helpviewer_keywords:
- C26446
ms.openlocfilehash: eff94d61f6c792a6ad720a24b049a25d9d354f91
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/27/2020
ms.locfileid: "87215076"
---
# <a name="c26446-use_gsl_at"></a>C26446 USE_GSL_AT

Unchecked 添字演算子の代わりにを使用することをお勧め `gsl::at()` します。

C++ Core Guidelines: [bounds. 4: 標準ライブラリの関数と、範囲チェックされていない型を使用しない](https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#probounds-bounds-safety-profile)でください。

C++ Core Guidelines の境界プロファイルは、生のポインターと unchecked 操作の使用を回避することで、メモリの安全でない操作を排除しようとします。 バッファーへの一貫した範囲チェック付きアクセスを実行する方法の1つは、ガイドラインサポートライブラリのユーティリティを使用することです `gsl::at()` 。 また、 `at()` STL コンテナーで使用可能なの標準実装に依存することもお勧めします。

このルールは、"演算子の呼び出し" () によってチェックされない可能性のあるアクセスが実行される場所を見つけるのに役立ち \[ ます。 ほとんどの場合、このような呼び出しは簡単にに置き換えることができ `gsl::at()` ます。

- 添字演算子で非定数インデックスが使用されている場合は、既知のサイズの配列へのアクセスにフラグが設定されます。 定数インデックスは、 [C26483 STATIC_INDEX_OUT_OF_RANGE](c26483.md)によって処理されます。
- オーバーロードされた演算子 [] の呼び出しについて警告するロジックは、より複雑です。
  - インデックスが整数でない場合、呼び出しは無視されます。 また、このような演算子のパラメーターは参照によって渡されるため、標準マップでのインデックス作成も処理されます。
  - 演算子が **`noexcept`** 、、 **throw ()**、またはを使用して非スローとしてマークされている場合 **`__declspec(nothrow)`** 、呼び出しにフラグが設定されます。 添字演算子が例外をスローしない場合は、範囲チェックを実行しないか、これらのチェックがあいまいであることを前提としています。
  - 演算子が非スローとしてマークされていない場合は、通常のメンバー関数も定義している STL コンテナーからのものであることを示すフラグが付いている可能性があり `at()` ます (この関数は、単純な名前の照合によって検出されます)。
  - ルールは、標準関数の呼び出しに対して警告しません `at()` 。 これらの関数は安全であり、に置き換えても、 `gsl::at()` あまり価値はありません。
- へのインデックス作成 `std::basic_string_view<>` は安全ではないため、警告が発行されます。 標準の文字列ビューは `gsl::basic_string_span<>` 、常に範囲がチェックされるで置き換えることができます。
- 実装では、ユーザーコードがループまたは分岐内のどこかにある可能性がある範囲チェックを考慮しません。 ここでの精度は、パフォーマンスのために取引されます。 一般に、明示的な範囲チェックは、より信頼性の高い反復子またはより簡潔な拡張ループに置き換えることができます。
