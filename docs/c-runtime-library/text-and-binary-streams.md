---
title: テキスト ストリームとバイナリ ストリーム
description: Microsoft C ランタイムライブラリのテキストストリームおよびバイナリストリームの説明。
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- binary streams
- text streams
ms.assetid: 57035e4a-955d-4e04-a560-fcf67ce68b4e
ms.openlocfilehash: 522e4d5f119e4415694b59b2b08141a45f06fe5a
ms.sourcegitcommit: 9451db8480992017c46f9d2df23fb17b503bbe74
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/30/2020
ms.locfileid: "91589615"
---
# <a name="text-and-binary-streams"></a>テキスト ストリームとバイナリ ストリーム

テキスト ストリームは、読むことができるように、テキスト指向の表示として書き込まれた 1 行または複数行のテキストで構成されます。 テキスト ストリームから読み取る場合、プログラムは各行の末尾で `NL` を読み取ります。 テキスト ストリームに書き込む場合は、プログラムは行の末尾を示すために `NL` を書き込みます。 ファイル内のテキストを表現するためのターゲット環境間で異なる規則を一致させるために、ライブラリ関数が、プログラムとテキスト ストリームの間で送信される文字の表現と数を変更することがあります。

テキストストリーム内の位置は制限されます。 現在のファイル位置インジケーターは、[fgetpos](../c-runtime-library/reference/fgetpos.md) または [ftell](../c-runtime-library/reference/ftell-ftelli64.md) を呼び出すことで取得できます。 この方法で取得された位置に、または[fsetpos](../c-runtime-library/reference/fsetpos.md) や [fseek](../c-runtime-library/reference/fseek-fseeki64.md) を呼び出すことでストリームの先頭または末尾に、テキスト ストリームを配置できます。 その他の配置の変更はサポートされていません。

移植性を最大にするために、プログラムは次のように記述しないでください。

- 空のファイル。
- 行の末尾のスペース文字。
- 不完全な行 (ファイルの最後の `NL` を省略する)。
- 印刷可能な文字、NL、`HT` (水平タブ) 以外の文字。

これらの規則に従うと、テキスト ストリームから読み取る文字のシーケンス (バイトまたはマルチバイト文字のどちらかとして) が、ファイル作成時にテキスト ストリームに書き込んだ文字のシーケンスと一致します。 そうしないと、作成したファイルを閉じるときにファイルが空の場合、ライブラリ関数によって該当ファイルが削除されることがあります。 または、ファイルに書き込む文字が変更されたり削除されたりすることがあります。

バイナリ ストリームは、1 バイトまたは複数バイトの任意の情報で構成されます。 (バイト指向の) バイナリ ストリームに任意のオブジェクトに格納されている値を書き込み、書き込んだ際にオブジェクトに格納された内容を正確に読み取ることができます。 ライブラリ関数では、プログラムとバイナリストリームの間で送信されるバイトは変更されません。 ただし、 `NULL` バイナリストリームで書き込むファイルには、任意の数のバイトを追加できます。 プログラムは、 `NULL` バイナリストリームの末尾でこれらの追加のバイトを処理する必要があります。

バイナリストリーム内の位置は、ストリームの末尾からの相対位置を除いて、適切に定義されます。 現在のファイル位置インジケーターは、テキスト ストリームの場合と同じ方法で、取得および変更できます。 [Ftell](../c-runtime-library/reference/ftell-ftelli64.md)および[fseek](../c-runtime-library/reference/fseek-fseeki64.md)によって使用されるオフセットは、ストリームの先頭 (バイトゼロ) のバイト数をカウントするので、これらのオフセットに対する整数演算では、予測可能な結果が得られます。

バイト ストリームはバイトのシーケンスとしてファイルを扱います。 プログラム内では、ストリームは、前述の差異がある可能性を除き、同一のバイトのシーケンスのように見えます。

## <a name="see-also"></a>関連項目

[ファイルとストリーム](../c-runtime-library/files-and-streams.md)
