---
title: ドキュメント ビュー アーキテクチャの代替方法
ms.date: 11/04/2016
helpviewer_keywords:
- documents [MFC], applications without
- CDocument class [MFC], space requirements
- views [MFC], applications without
ms.assetid: 2c22f352-a137-45ce-9971-c142173496fb
ms.openlocfilehash: 41af30d25d7ddb9e2bdbb7a0f7b86cb741ae1048
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/14/2020
ms.locfileid: "81370801"
---
# <a name="alternatives-to-the-documentview-architecture"></a>ドキュメント/ビュー アーキテクチャの代替手段

MFC アプリケーションは、通常、ドキュメント/ビュー アーキテクチャを使用して、情報、ファイル形式、およびユーザーに対するデータの視覚的な表現を管理します。 デスクトップ アプリケーションの大部分では、ドキュメント/ビュー アーキテクチャは適切かつ効率的なアプリケーション アーキテクチャです。 このアーキテクチャは、データの表示とは切り離し、ほとんどの場合、アプリケーションを簡素化し、コードの冗長化を削減します。

ただし、ドキュメント/ビュー アーキテクチャは、状況によっては適切ではありません。 次の例を考えてみます。

- C for Windows で作成されたアプリケーションを移植する場合は、ドキュメント/ビューのサポートをアプリケーションに追加する前に、ポートを完成させる必要があります。

- 軽量のユーティリティを作成する場合は、ドキュメント/ビュー アーキテクチャなしで実行できる場合があります。

- 元のコードでデータ管理とデータ表示が既に混在している場合、2 つを分離する必要があるため、コードをドキュメント/ビュー モデルに移動する必要があるため、この作業は必要ありません。 コードはそのままにしておくかもしれません。

ドキュメント/ビュー アーキテクチャを使用しないアプリケーションを作成するには、MFC アプリケーション ウィザードの手順 1 で[**ドキュメント/ビュー アーキテクチャ のサポート**]チェック ボックスをオフにします。 詳細については[、MFC アプリケーション ウィザード](../mfc/reference/mfc-application-wizard.md)を参照してください。

> [!NOTE]
> MFC アプリケーション ウィザードで作成されるダイアログ ベースのアプリケーションではドキュメント/ビュー アーキテクチャが使用されないので、ダイアログ アプリケーションの種類を選択すると、[**ドキュメント/ビュー アーキテクチャのサポート**] チェック ボックスは無効になります。

Visual C++ ウィザード、およびソース エディタおよびダイアログ エディタは、ウィザードで生成された他のアプリケーションと同様に、生成されたアプリケーションと同様に動作します。 アプリケーションは、ツールバー、スクロール バー、およびステータス バーをサポートでき、**かつ、"About/情報**" ボックスが表示されます。 アプリケーションはドキュメント テンプレートを登録せず、ドキュメント クラスも含めなくなります。

生成されたアプリケーションには、`CChildView`から`CWnd`派生した ビュー クラス があります。 MFC は、アプリケーションによって作成されたフレーム ウィンドウ内で、ビュー クラスのインスタンスを 1 つ作成および配置します。 MFC は、アプリケーションのコンテンツの位置付けと管理を簡略化するため、ビュー ウィンドウを使用して実行されます。 このクラスのメンバーに描画コード`OnPaint`を追加できます。 コードでは、フレームではなくビューにスクロール バーを追加する必要があります。

MFC が提供するドキュメント/ビュー アーキテクチャは、アプリケーションの基本的な機能の多くを実装する責任があるため、プロジェクトに存在しない場合、アプリケーションの多くの重要な機能を実装する責任があることを意味します。

- MFC アプリケーション ウィザードで提供されるとおり、アプリケーションのメニューには **、[ファイル]** メニューの **[新規作成**] コマンドと **[終了]** コマンドのみが表示されます。 (New**New**コマンドは MDI アプリケーションでのみサポートされ、ドキュメント/ビューのサポートがない SDI アプリケーションではサポートされません)。生成されたメニュー・リソースは、MRU (最近使用された) リストをサポートしません。

- アプリケーションでサポートされるコマンド **([ファイル]** メニューの **[開く**] や **[保存]** など) に対して、ハンドラー関数と実装を追加する必要があります。 MFC は通常、これらの機能をサポートするコードを提供しますが、そのサポートはドキュメント/ビュー アーキテクチャに密接に結びついています。

- アプリケーションのツールバーは、要求した場合は最小限です。

MFC アプリケーション ウィザードを使用して、ドキュメント/ビュー アーキテクチャを使用せずにアプリケーションを作成することを強くお勧めします。 ただし、ウィザードの使用を避ける必要がある場合は、次の方法を使用して、コード内のドキュメント/ビュー アーキテクチャをバイパスします。

- ドキュメントを未使用の付属として扱い、上記の方法で示したように、データ管理コードをビュー クラスに実装します。 ドキュメントのオーバーヘッドは比較的低い。 1 つの[CDocument](../mfc/reference/cdocument-class.md)オブジェクトは、単独でオーバーヘッドが少ないほか、基本クラスの`CDocument` [CCmdTarget](../mfc/reference/ccmdtarget-class.md)と[CObject](../mfc/reference/cobject-class.md)のオーバーヘッドも小さくなります。 後者のクラスはどちらも小さい。

   で宣言`CDocument`:

  - 2`CString`つのオブジェクト。

  - 3**つのBOOL**s.

  - 1`CDocTemplate`つのポインター。

  - ドキュメント`CPtrList`のビューのリストを含む 1 つのオブジェクト。

  また、ドキュメントオブジェクト、ビューオブジェクト、フレームウィンドウ、およびドキュメントテンプレートオブジェクトの作成に時間が必要です。

- ドキュメントとビューの両方を未使用の付属物として扱います。 ビューではなく、フレーム ウィンドウにデータ管理と描画コードを配置します。 このアプローチは、C 言語プログラミング モデルに近いものです。

- ドキュメントとビューを作成する部分をオーバーライドして、ドキュメントとビューを作成する必要がなくなります。 ドキュメントの作成プロセスは、 への呼`CWinApp::AddDocTemplate`び出しで開始されます。 アプリケーション クラスの`InitInstance`メンバー関数からその呼び出しを削除し、代わりに自分で`InitInstance`フレーム ウィンドウを作成します。 データ管理コードをフレーム ウィンドウ クラスに配置します。 ドキュメント/ビューの作成プロセスは、[ドキュメント/ビュー作成](../mfc/document-view-creation.md)で示されています。 これはより多くの作業であり、フレームワークをより深く理解する必要がありますが、ドキュメント/ビューのオーバーヘッドを完全に解放します。

[「MFC: ドキュメントとビューを使用しないデータベース クラスの使用](../data/mfc-using-database-classes-without-documents-and-views.md)」では、データベース アプリケーションのコンテキストにおけるドキュメント/ビューの代替方法の具体例を示します。

## <a name="see-also"></a>関連項目

[ドキュメント/ビュー アーキテクチャ](../mfc/document-view-architecture.md)
