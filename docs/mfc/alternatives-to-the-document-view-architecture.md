---
title: ドキュメント/ビューアーキテクチャの代替手段
ms.date: 11/04/2016
helpviewer_keywords:
- documents [MFC], applications without
- CDocument class [MFC], space requirements
- views [MFC], applications without
ms.assetid: 2c22f352-a137-45ce-9971-c142173496fb
ms.openlocfilehash: 66325d1ae087b29f59f37197fb8695504bbddbc6
ms.sourcegitcommit: c21b05042debc97d14875e019ee9d698691ffc0b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/09/2020
ms.locfileid: "84619759"
---
# <a name="alternatives-to-the-documentview-architecture"></a>ドキュメント/ビュー アーキテクチャの代替手段

通常、MFC アプリケーションでは、ドキュメント/ビューアーキテクチャを使用して、情報、ファイル形式、およびユーザーに対するデータの視覚的表現を管理します。 ほとんどのデスクトップアプリケーションでは、ドキュメント/ビューアーキテクチャが適切で効率的なアプリケーションアーキテクチャです。 このアーキテクチャでは、データが表示されないようにします。ほとんどの場合、アプリケーションを単純化し、冗長なコードを削減します。

ただし、ドキュメント/ビューアーキテクチャは、状況によっては適切ではありません。 次の例を考えてみましょう。

- Windows 用に C で記述されたアプリケーションを移植する場合は、ドキュメント/ビューのサポートをアプリケーションに追加する前に、ポートを完了することをお勧めします。

- ライトウェイトユーティリティを作成している場合は、ドキュメント/ビューアーキテクチャを使用せずに実行できることがわかります。

- 元のコードでデータの表示とデータ管理が既に混在している場合は、ドキュメント/ビューモデルにコードを移動しても、2つを分離する必要があるため、作業には価値がありません。 コードをそのままにしておくことをお勧めします。

ドキュメント/ビューアーキテクチャを使用しないアプリケーションを作成するには、MFC アプリケーションウィザードの手順1で [**ドキュメント/ビューアーキテクチャのサポート**] チェックボックスをオフにします。 詳細については、「 [MFC アプリケーションウィザード](reference/mfc-application-wizard.md)」を参照してください。

> [!NOTE]
> MFC アプリケーションウィザードによって生成されるダイアログベースのアプリケーションでは、ドキュメント/ビューアーキテクチャは使用されません。そのため、[アプリケーションの種類] ダイアログボックスを選択すると、[**ドキュメント/ビューアーキテクチャのサポート**] チェックボックスは無効になります。

ウィザードで生成された他のアプリケーションの場合と同様に、Visual C++ のウィザード、およびソースエディターとダイアログエディターを使用して、生成されたアプリケーションを操作できます。 アプリケーションでは、ツールバー、スクロールバー、ステータスバーをサポートでき、[**バージョン情報**] ボックスがあります。 アプリケーションはドキュメントテンプレートを登録しません。ドキュメントクラスは含まれません。

生成されたアプリケーションには、から派生したビュークラスがあることに注意 `CChildView` `CWnd` してください。 MFC は、アプリケーションによって作成されたフレームウィンドウ内に、ビュークラスの1つのインスタンスを作成して配置します。 MFC では、アプリケーションのコンテンツの配置と管理が簡略化されるため、引き続きビューウィンドウを使用します。 このクラスのメンバーには、描画コードを追加でき `OnPaint` ます。 コードでは、フレームではなくビューにスクロールバーを追加する必要があります。

MFC に用意されているドキュメント/ビューアーキテクチャでは、アプリケーションの基本的な機能の多くを実装する必要があるため、プロジェクトの中には、アプリケーションの多くの重要な機能を実装する責任があることを意味します。

- MFC アプリケーションウィザードで提供されているように、アプリケーションのメニューには、[**ファイル**] メニューの [**新規作成**] と [**終了**] のコマンドだけが含まれています。 (**新しい**コマンドは MDI アプリケーションでのみサポートされ、ドキュメント/ビューのサポートがない SDI アプリケーションではサポートされません)。生成されたメニューリソースは、MRU (最近使用されたもの) リストをサポートしていません。

- アプリケーションでサポートするすべてのコマンドに対して、ハンドラー関数と実装を追加する必要があります。これには、[**ファイル**] メニューの [**開く**] と [**保存**] が含まれます。 MFC には通常、これらの機能をサポートするコードが用意されていますが、そのサポートはドキュメント/ビューアーキテクチャに密接に結び付けられています。

- アプリケーションのツールバー (要求された場合) は最小限になります。

MFC アプリケーションウィザードを使用して、ドキュメント/ビューアーキテクチャを使用せずにアプリケーションを作成することを強くお勧めします。これは、ウィザードが正しい MFC アーキテクチャを保証するためです。 ただし、ウィザードの使用を避ける必要がある場合は、コード内のドキュメント/ビューアーキテクチャをバイパスするためのいくつかの方法を次に示します。

- ドキュメントを未使用の appendage として扱い、前に示したようにビュークラスにデータ管理コードを実装します。 ドキュメントのオーバーヘッドが比較的低くなっています。 1つの[CDocument](reference/cdocument-class.md)オブジェクトがそれ自体によって少量のオーバーヘッドを発生させるだけでなく、 `CDocument` の基本クラスである[CCmdTarget](reference/ccmdtarget-class.md)と[CObject](reference/cobject-class.md)のオーバーヘッドも小さくなります。 後者のクラスはどちらも小さいものです。

   で宣言されてい `CDocument` ます。

  - 2つ `CString` のオブジェクト。

  - 3個の**BOOL**。

  - 1つ `CDocTemplate` のポインター。

  - 1つの `CPtrList` オブジェクト。ドキュメントのビューの一覧が含まれています。

  さらに、ドキュメントには、ドキュメントオブジェクト、そのビューオブジェクト、フレームウィンドウ、およびドキュメントテンプレートオブジェクトを作成するための時間が必要です。

- ドキュメントとビューの両方を未使用のファイルとして扱います。 ビューではなく、データ管理と描画コードをフレームウィンドウに配置します。 この方法は、C 言語のプログラミングモデルに近いものです。

- ドキュメントとビューを作成する MFC フレームワークの部分をオーバーライドして、まったく作成されないようにします。 ドキュメントの作成プロセスは、の呼び出しから始まり `CWinApp::AddDocTemplate` ます。 アプリケーションクラスのメンバー関数からの呼び出しを排除 `InitInstance` し、代わりにフレームウィンドウを作成 `InitInstance` します。 データ管理コードをフレームウィンドウクラスに配置します。 ドキュメント/ビューの作成プロセスについては、「[ドキュメント/ビューの作成](document-view-creation.md)」を参照してください。 これはより多くの作業であり、フレームワークについてより深く理解する必要がありますが、ドキュメント/ビューのオーバーヘッドが完全に解放されます。

記事「 [MFC: ドキュメントとビューを使用しないデータベースクラスの使用](../data/mfc-using-database-classes-without-documents-and-views.md)」では、データベースアプリケーションのコンテキストにおけるドキュメント/ビューの代替手段について具体的な例を示しています。

## <a name="see-also"></a>関連項目

[ドキュメント/ビューアーキテクチャ](document-view-architecture.md)
