---
title: コンパイラの警告 (レベル 1) C4530
description: C4530 のコンパイラ警告をマイクロソフト C++ コンパイラのリファレンス ガイド。
ms.date: 04/02/2020
f1_keywords:
- C4530
helpviewer_keywords:
- C4530
ms.assetid: a04dcdb2-84db-459d-9e5e-4e743887465f
ms.openlocfilehash: 9de88a4b0b6c7176ff82b68c92d09d9fe75a70b2
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/14/2020
ms.locfileid: "81369781"
---
# <a name="compiler-warning-level-1-c4530"></a>コンパイラの警告 (レベル 1) C4530

> C++ 例外ハンドラが使用されていますが、アンワインドセマンティクスは有効ではありません。 /EHsc を指定する

コードでは C++ 例外処理を使用していますが、コンパイラ オプションに[/EHsc](../../build/reference/eh-exception-handling-model.md)は含まれていません。

## <a name="remarks"></a>解説

コンパイラでは、例外**`/EHsc`** 処理に関する C++ 標準に準拠した C++ コードをビルドするオプションが必要です。 標準 C++*アンワインド セマンティクスは、* 例外がスローされた場所とキャッチされた場所の間に構築されたオブジェクトとスタック フレームを破棄し、リソースを回復することを指定します。 このプロセスは、*スタックのアンワインド*と呼ばれます。

この**`/EHsc`** オプションは、例外が含まれるスタック フレームを通過するときに、自動ストレージ オブジェクトのデストラクターを呼び出すコードを生成するようにコンパイラに指示します。 *自動ストレージ*オブジェクトは、ローカル変数などのスタック上に割り当てられたオブジェクトです。 自動ストレージと呼ばれるのは、関数が呼び出されたときに自動的に割り当てられ、戻ったときに自動的に解放されるためです。 *スタック フレーム*は、関数が呼び出されたときにスタックに配置されるデータと、その自動ストレージです。

例外がスローされると、キャッチされる前に複数のスタック フレームを通過する可能性があります。 これらのスタック フレームは、例外が逆呼び出し順序で通過するため、巻き戻す必要があります。 各スタック フレームの自動ストレージ オブジェクトは、リソースをクリーンに回復するために破棄する必要があります。 関数が正常に戻ったときに自動的に行われるのと同じ破棄と回復プロセスです。

このオプション**`/EHsc`** が有効になっていない場合、スロー関数と例外がキャッチされる関数との間のスタック フレーム内の自動ストレージ オブジェクトは破棄されません。 **try**ブロックまたは**catch**ブロックで作成された自動ストレージ オブジェクトだけが破棄され、リソースリークやその他の予期しない動作が発生する可能性があります。

実行可能ファイルに例外がスローされる可能性がない場合は、この警告を無視しても問題ありません。 コードによっては、他の例外処理オプションが必要な場合があります。 詳細については[、/EH](../../build/reference/eh-exception-handling-model.md)を参照してください。

## <a name="example"></a>例

次のサンプルでは、C4530 が生成されます。

```cpp
// C4530.cpp
// compile with: /W1
int main() {
   try{} catch(int*) {}   // C4530
}
```

このサンプルをコンパイル**`/EHsc`** して、警告を解決します。
