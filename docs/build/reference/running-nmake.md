---
title: NMAKE の実行
description: NMAKE を実行する方法について説明します。
ms.date: 02/09/2020
helpviewer_keywords:
- targets, building
- response files, NMAKE
- targets
- command files
- NMAKE program, targets
- NMAKE program, running
- command files, NMAKE
ms.assetid: 0421104d-8b7b-4bf3-86c1-928d9b7c1a8c
ms.openlocfilehash: c2327e13e59ebf9df1ecba6fa66c6354641768ee
ms.sourcegitcommit: 72161bcd21d1ad9cc3f12261aa84a5b026884afa
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/17/2020
ms.locfileid: "90743140"
---
# <a name="running-nmake"></a>NMAKE の実行

## <a name="syntax"></a>構文

> **NMAKE** [*オプション*...][*マクロ*...][*ターゲット*...][ **\@** _コマンド-ファイル_...]

## <a name="remarks"></a>注釈

NMAKE は、指定された *ターゲット* のみをビルドします。指定されていない場合は、メイクファイル内の最初のターゲットをビルドします。 最初のメイクファイルターゲットは、他のターゲットをビルドする [pseudotarget](description-blocks.md#pseudotargets) にすることができます。 NMAKE は、 **/f**で指定されたメイクファイルを使用します。 **/f** が指定されていない場合は、現在のディレクトリにあるメイクファイルファイルです。 メイクファイルが指定されていない場合は、推論規則を使用してコマンドライン *ターゲット*が作成されます。

コマンド *ファイル* テキストファイル (または応答ファイル) には、コマンドライン入力が含まれています。 その他の入力は \@ *、コマンドファイル*の前または後に置くことができます。 パスは許可されています。 *コマンドファイル*では、改行はスペースとして扱われます。 マクロ定義にスペースが含まれている場合は、引用符で囲みます。

## <a name="nmake-options"></a>NMAKE のオプション

次の表では、NMAKE のオプションについて説明します。 オプションの前にはスラッシュ ( `/` ) またはダッシュ () が付いて `-` おり、大文字と小文字は区別されません。 [`!CMDSWITCHES`](makefile-preprocessing-directives.md)メイクファイルまたは Tools.ini のオプション設定を変更するには、を使用します。

| オプション | 目的 |
| ------------ | ------------- |
| **/A** | 評価されたすべてのターゲットのビルドを強制的に実行します。これは、依存関係と比較した後であっても同様です。 は、関連のないターゲットのビルドを強制しません。 |
| **/B** | タイムスタンプが等しい場合でもビルドを強制的に実行します。 高速システム (2 秒以下の解決策) に対してのみ推奨されます。 |
| **スイッチ** | 致命的でない NMAKE のエラーまたは警告、タイムスタンプ、および NMAKE の著作権メッセージを含む、既定の出力を抑制します。 **/K**によって発行された警告を抑制します。 |
| **D** | ターゲットが存在しない場合に、評価対象の各ターゲットおよび依存メッセージのタイムスタンプを表示します。 メイクファイルのデバッグに **/p** を使用すると便利です。 `!CMDSWITCHES`メイクファイルの一部に対して **/d**を設定または解除するには、を使用します。 |
| **/E** | 環境変数によってメイクファイルマクロ定義がオーバーライドされます。 |
| **/Errorreport** [ **NONE** &#124; **PROMPT** &#124; **QUEUE** &#124; **SEND** ] | 非推奨。 [Windows エラー報告 (WER)](/windows/win32/wer/windows-error-reporting) 設定コントロールレポート。 |
| **/F** *ファイル名* | *ファイル名*をメイクファイルとして指定します。 スペースまたはタブは、 *ファイル名*の前に配置できます。 各メイクファイルに対して、 **/f** を1回指定します。 標準入力からメイクファイルを指定するには、filename にダッシュ () を指定し、 `-` **F6**キーまたは**CTRL + Z キーを押し**てキーボード入力を終了します。 *filename* |
| **/G** | ディレクティブに含まれるメイクメイクを表示し `!INCLUDE` ます。 詳細については、「 [メイクファイルのプリプロセスディレクティブ](makefile-preprocessing-directives.md)」を参照してください。 |
| **/Help**、 **/?** | NMAKE のコマンドライン構文の簡単な概要を表示します。 |
| **/I** | すべてのコマンドの終了コードを無視します。 メイクファイルの一部に対して **/i** を設定またはクリアするには、を使用 `!CMDSWITCHES` します。 メイクファイルの一部の終了コードを無視するには、ダッシュ ( `-` ) コマンド修飾子またはを使用し [`.IGNORE`](dot-directives.md) ます。 両方が指定されている場合は、 **/k** をオーバーライドします。 |
| **/K** | コマンドがエラーを返した場合、関連のない依存関係の作成を続行します。 また、は警告を発行し、1の終了コードを返します。 既定では、いずれかのコマンドが0以外の終了コードを返すと NMAKE は停止します。 **/K**からの警告は **/c**によって抑制されます。**/I**両方が指定されている場合は、 **/k**をオーバーライドします。 |
| **Ms-dos** | が表示されますが、コマンドは実行されません。前処理コマンドが実行されます。 では、再帰的な NMAKE 呼び出しにコマンドは表示されません。 メイク (メイク) をデバッグし、タイムスタンプをチェックする場合に便利です。 メイクファイルの一部に対して **/n** を設定または解除するには、を使用 `!CMDSWITCHES` します。 |
| **/NOLOGO** | NMAKE の著作権メッセージを表示しません。 |
| **/P** | 情報 (マクロの定義、推論規則、ターゲット、 [`.SUFFIXES`](dot-directives.md) リスト) を標準出力に表示し、ビルドを実行します。 メイクファイルまたはコマンドラインターゲットが存在しない場合は、情報のみが表示されます。 **/D**と共に使用して、メイクファイルをデバッグします。 |
| **/Q** | ターゲットのタイムスタンプをチェックします。ビルドを実行しません。 すべてのターゲットが最新の場合はゼロの終了コードを返し、ターゲットが古い場合は0以外の終了コードを返します。 前処理コマンドが実行されます。 バッチファイルから NMAKE を実行する場合に便利です。 |
| **/R** | リストをクリアし、Tools.ini ファイルで定義されているか、事前に定義されている `.SUFFIXES` 推論規則とマクロを無視します。 |
| **/S** | 実行されたコマンドの表示を抑制します。 メイクファイルの一部での表示を抑制するに **\@** は、コマンド修飾子またはを使用し [`.SILENT`](dot-directives.md) ます。 メイクファイルの一部に対して **/s** を設定またはクリアするには、を使用 `!CMDSWITCHES` します。 |
| **/T** | コマンドラインターゲット (または最初のメイクファイルターゲット) のタイムスタンプを更新し、前処理コマンドを実行しますが、ビルドは実行しません。 |
| **/U** | **/N**と組み合わせて使用する必要があります。 **/N**出力をバッチファイルとして使用できるように、インライン NMAKE ファイルをダンプします。 |
| **/X** *ファイル名* | 標準エラーではなく *ファイル名* に NMAKE のエラー出力を送信します。 スペースまたはタブは、 *ファイル名*の前に配置できます。 標準出力にエラー出力を送信するには、 `-` *ファイル名*にダッシュ () を指定します。 コマンドから標準エラーへの出力には影響しません。 |
| **/Y** | バッチモードの推論規則を無効にします。 このオプションを選択すると、すべてのバッチモード推論規則が通常の推論規則として扱われます。 |

## <a name="toolsini-and-nmake"></a>Tools.ini と NMAKE

NMAKE は、 **/r** が使用されている場合を除いて、メイクファイルを読み取る前に Tools.ini を読み取ります。 現在のディレクトリの最初の Tools.ini を検索し、次に INIT 環境変数で指定されたディレクトリに検索します。 初期化ファイルの NMAKE 設定のセクションはで始まり `[NMAKE]` 、任意のメイクファイル情報を含めることができます。 シャープ記号 () で始まる別の行にコメントを指定し `#` ます。

## <a name="exit-codes-from-nmake"></a>NMAKE で返される終了コード

NMAKE は次の終了コードを返します。

| コード | 説明 |
| ---------- | ------------- |
| 0 | エラーは発生しません (警告の可能性があります) |
| 1 | 不完全なビルドです ( **/k** が使用されている場合にのみ発行されます) |
| 2 | プログラムエラー。次のいずれかの問題が原因で発生する可能性があります。<br /> -メイクファイルに構文エラーがあります<br /> -コマンドのエラーまたは終了コード<br /> -ユーザーによる中断 |
| 4 | システムエラー-メモリが不足しています |
| 255 | ターゲットが最新ではありません ( **/q** が使用されている場合にのみ発行されます) |

## <a name="see-also"></a>関連項目

[NMAKE のリファレンス](nmake-reference.md)
