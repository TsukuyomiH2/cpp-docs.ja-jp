---
title: NMAKE の実行
ms.date: 08/11/2019
helpviewer_keywords:
- targets, building
- response files, NMAKE
- targets
- command files
- NMAKE program, targets
- NMAKE program, running
- command files, NMAKE
ms.assetid: 0421104d-8b7b-4bf3-86c1-928d9b7c1a8c
ms.openlocfilehash: bc274190b64d5340aaac5de594931d4a5333a8c0
ms.sourcegitcommit: db1ed91fa7451ade91c3fb76bc7a2b857f8a5eef
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/13/2019
ms.locfileid: "68980505"
---
# <a name="running-nmake"></a>NMAKE の実行

## <a name="syntax"></a>構文

> **NMAKE**[*オプション*...][*マクロ*...][*ターゲット*...][ **\@** _コマンド-ファイル_...]

## <a name="remarks"></a>Remarks

NMAKE は、指定された*ターゲット*のみをビルドします。指定されていない場合は、メイクファイル内の最初のターゲットをビルドします。 最初のメイクファイルターゲットは、他のターゲットをビルドする[pseudotarget](pseudotargets.md)にすることができます。 NMAKE は、 **/f**で指定されたメイクファイルを使用します。 **/f**が指定されていない場合は、現在のディレクトリにあるメイクファイルファイルです。 メイクファイルが指定されていない場合は、推論規則を使用してコマンドライン*ターゲット*が作成されます。

コマンド*ファイル*テキストファイル (または応答ファイル) には、コマンドライン入力が含まれています。 その他の入力は\@ *、コマンドファイル*の前または後に置くことができます。 パスは許可されています。 *コマンドファイル*では、改行はスペースとして扱われます。 マクロ定義にスペースが含まれている場合は、引用符で囲みます。

## <a name="nmake-options"></a>NMAKE のオプション

次の表では、NMAKE のオプションについて説明します。 オプションの前にはスラッシュ (`/`) またはダッシュ (`-`) が付いており、大文字と小文字は区別されません。 メイク[`!CMDSWITCHES`](makefile-preprocessing-directives.md)ファイルまたはツール .ini でオプションの設定を変更するには、を使用します。

| オプション | 目的 |
| ------------ | ------------- |
| **/A** | 評価されたすべてのターゲットのビルドを強制的に実行します。これは、依存関係と比較した後であっても同様です。 は、関連のないターゲットのビルドを強制しません。 |
| **/B** | タイムスタンプが等しい場合でもビルドを強制的に実行します。 非常に高速なシステム (2 秒以下の解決策) に対してのみ推奨されます。 |
| **/C** | 致命的でない NMAKE のエラーまたは警告、タイムスタンプ、および NMAKE の著作権メッセージを含む、既定の出力を抑制します。 **/K**によって発行された警告を抑制します。 |
| **/D** | ターゲットが存在しない場合に、評価対象の各ターゲットおよび依存メッセージのタイムスタンプを表示します。 メイクファイルのデバッグに **/p**を使用すると便利です。 メイク`!CMDSWITCHES`ファイルの一部に対して **/d**を設定または解除するには、を使用します。 |
| **/E** | 環境変数によってメイクファイルマクロ定義がオーバーライドされます。 |
| **/ERRORREPORT** [ **NONE** &#124; **PROMPT** &#124; **QUEUE** &#124; **SEND** ] | 実行時に dism.exe にエラーが発生した場合は、 **/errorreport**を使用して、これらの内部エラーに関する情報をマイクロソフトに送信できます。<br /><br /> 詳細については、「[/errorReport (内部コンパイラ エラーの報告)](errorreport-report-internal-compiler-errors.md)」を参照してください。 |
| **/F***ファイル名* | *ファイル名*をメイクファイルとして指定します。 スペースまたはタブは、*ファイル名*の前に配置できます。 各メイクファイルに対して、 **/f**を1回指定します。 標準入力からメイクファイルを指定する`-`には、 *filename*にダッシュ () を指定し、 **F6**キーまたは**CTRL + Z キーを押し**てキーボード入力を終了します。 |
| **/G** | `!INCLUDE`ディレクティブに含まれるメイクメイクを表示します。 詳細については、「[メイクファイルのプリプロセスディレクティブ](makefile-preprocessing-directives.md)」を参照してください。 |
| **/HELP**、 **/?** | NMAKE のコマンドライン構文の簡単な概要を表示します。 |
| **/I** | すべてのコマンドの終了コードを無視します。 メイクファイルの一部に対して **/i**を設定または`!CMDSWITCHES`クリアするには、を使用します。 メイクファイルの一部の終了コードを無視するには、ダッシュ`-`() コマンド修飾子[`.IGNORE`](dot-directives.md)またはを使用します。 両方が指定されている場合は、 **/k**をオーバーライドします。 |
| **/K** | コマンドがエラーを返した場合、関連のない依存関係の作成を続行します。 また、は警告を発行し、1の終了コードを返します。 既定では、いずれかのコマンドが0以外の終了コードを返すと NMAKE は停止します。 **/K**からの警告は **/c**によって抑制されます。 **/I**両方が指定されている場合は、 **/k**をオーバーライドします。 |
| **MS-DOS** | が表示されますが、コマンドは実行されません。前処理コマンドが実行されます。 では、再帰的な NMAKE 呼び出しにコマンドは表示されません。 メイク (メイク) をデバッグし、タイムスタンプをチェックする場合に便利です。 メイクファイルの一部に対して **/n**を設定または`!CMDSWITCHES`解除するには、を使用します。 |
| **/NOLOGO** | NMAKE の著作権メッセージを表示しません。 |
| **/P** | 情報 (マクロの定義、推論規則、ターゲット、 [`.SUFFIXES`](dot-directives.md)リスト) を標準出力に表示し、ビルドを実行します。 メイクファイルまたはコマンドラインターゲットが存在しない場合は、情報のみが表示されます。 **/D**と共に使用して、メイクファイルをデバッグします。 |
| **/Q** | ターゲットのタイムスタンプをチェックします。ビルドを実行しません。 すべてのターゲットが最新の場合はゼロの終了コードを返し、ターゲットが古い場合は0以外の終了コードを返します。 前処理コマンドが実行されます。 バッチファイルから NMAKE を実行する場合に便利です。 |
| **R** | `.SUFFIXES`リストをクリアし、ツール .ini ファイルで定義されている、または事前に定義されている推論規則とマクロを無視します。 |
| **/S** | 実行されたコマンドの表示を抑制します。 メイクファイルの一部での表示を抑制するに **\@** は、コマンド[`.SILENT`](dot-directives.md)修飾子またはを使用します。 メイクファイルの一部に対して **/s**を設定または`!CMDSWITCHES`クリアするには、を使用します。 |
| **/T** | コマンドラインターゲット (または最初のメイクファイルターゲット) のタイムスタンプを更新し、前処理コマンドを実行しますが、ビルドは実行しません。 |
| **/U** | **/N**と組み合わせて使用する必要があります。 **/N**出力をバッチファイルとして使用できるように、インライン NMAKE ファイルをダンプします。 |
| **/X***ファイル名* | 標準エラーではなく*ファイル名*に NMAKE のエラー出力を送信します。 スペースまたはタブは、*ファイル名*の前に配置できます。 標準出力にエラー出力を送信するには、`-`*ファイル名*にダッシュ () を指定します。 コマンドから標準エラーへの出力には影響しません。 |
| **/Y** | バッチモードの推論規則を無効にします。 このオプションを選択すると、すべてのバッチモード推論規則が通常の推論規則として扱われます。 |

## <a name="toolsini-and-nmake"></a>Tools.ini と NMAKE

**/R**を使用しない限り、NMAKE は makefile を読み取ります。 まず、現在のディレクトリでは、次に、INIT 環境変数によって指定されたディレクトリ内で、desktop.ini が検索されます。 初期化ファイルの NMAKE 設定のセクションはで`[NMAKE]`始まり、任意のメイクファイル情報を含めることができます。 シャープ記号 (`#`) で始まる別の行にコメントを指定します。

## <a name="exit-codes-from-nmake"></a>NMAKE で返される終了コード

NMAKE は次の終了コードを返します。

| コード | 説明 |
| ---------- | ------------- |
| 0 | エラーは発生しません (警告の可能性があります) |
| 1 | 不完全なビルドです ( **/k**が使用されている場合にのみ発行されます) |
| 2 | プログラムエラー。次のいずれかの問題が原因で発生する可能性があります。<br /> -メイクファイルに構文エラーがあります<br /> -コマンドのエラーまたは終了コード<br /> -ユーザーによる中断 |
| 4 | システムエラー-メモリが不足しています |
| 255 | ターゲットが最新ではありません ( **/q**が使用されている場合にのみ発行されます) |

## <a name="see-also"></a>関連項目

[NMAKE リファレンス](nmake-reference.md)
