---
title: /std (言語の標準バージョンの指定)
description: MSVC コンパイラオプション/std は、コンパイラでサポートされている C または C++ 言語の標準を指定します。
ms.date: 10/29/2020
f1_keywords:
- /std
- -std
- /std:c++14
- /std:c++17
- /std:c11
- /std:c17
- VC.Project.VCCLCompilerTool.CppLanguageStandard
ms.assetid: 0acb74ba-1aa8-4c05-b96c-682988dc19bd
ms.openlocfilehash: 208789071ff028107d3c7311c3b5c6cf3eea7c1d
ms.sourcegitcommit: 4abc6c4c9694f91685cfd77940987e29a51e3143
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/03/2020
ms.locfileid: "93238474"
---
# <a name="std-specify-language-standard-version"></a>`/std` (言語の標準バージョンの指定)

指定されたバージョンの C または C++ 言語標準でサポートされている C および C++ 言語機能を有効にします。

## <a name="syntax"></a>構文

> **`/std:c++14`**\
> **`/std:c++17`**\
> **`/std:c++latest`**\
> **`/std:c11`**\
> **`/std:c17`**

## <a name="remarks"></a>解説

この **`/std`** オプションは、Visual Studio 2017 以降で使用できます。 これは、コードのコンパイル中に有効になっているバージョン固有の ISO C または C++ プログラミング言語の標準機能を制御するために使用されます。 このオプションを使用すると、言語標準の特定のバージョンに準拠している既存のコードを破壊する可能性のある、新しい言語およびライブラリ機能のサポートを無効にできます。

### <a name="c-standards-support"></a>C++ 標準サポート

既定で **`/std:c++14`** は、が指定されています。これにより、C++ 言語標準の以降のバージョンの言語および標準ライブラリ機能が無効になります。 を使用し  **`/std:c++17`** て、c++ 17 の標準固有の機能と動作を有効にします。 現在実装されているコンパイラと、次のドラフト標準に提案されている標準ライブラリ機能を明示的に有効にするには、を使用し **`/std:c++latest`** ます。 C++ 20 のすべての機能にはが必要 **`/std:c++latest`** です。実装が完了すると、新しいオプションが有効になり **`/std:c++20`** ます。

既定のオプションでは、 **`/std:c++14`** MSVC コンパイラによって実装された c++ 14 の機能のセットが有効になります。 このオプションを使用すると、言語標準のより新しいバージョンで変更された機能または新しい機能に対するコンパイラと標準ライブラリのサポートが無効になります。 以前のリリースの MSVC コンパイラで既に実装されている C++ 17 の一部の機能を無効にすることはできません。 Visual Studio 2015 Update 2 で使用可能な機能に対して既に依存関係を取得しているユーザーの重大な変更を回避するために、これらの機能 **`/std:c++14`** はオプションが指定されている場合は有効のままになります。

- [かっこ付きを `auto` 使用したの規則](https://wg21.link/n3922)

- [`typename` テンプレートテンプレートのパラメーター](https://wg21.link/n4051)

- [トライグラフの削除](https://wg21.link/n4086)

- [名前空間と列挙子の属性](https://wg21.link/n4266)

- [u8 文字リテラル](https://wg21.link/n4267)

を指定したときに有効になる C++ 14 と C++ 17 の機能の一覧 **`/std:c++14`** があります。 詳細については、「 [Microsoft C++ 言語準拠テーブル](../../overview/visual-cpp-language-conformance.md)」のメモを参照してください。

オプションを使用すると、 **`/std:c++17`** MSVC コンパイラによって実装された c++ 17 のすべての機能が有効になります。 このオプションを選択すると、C++ 17 以降で追加または変更された機能に対するコンパイラと標準ライブラリのサポートが無効になります。 これには、C++ 標準の作業ドラフトおよび欠陥更新のバージョンでの C + + 17 の変更が含まれます。

オプションを使用すると、 **`/std:c++latest`** コンパイラおよびライブラリで現在実装されている C + + 17 言語およびライブラリの機能が有効になります。 これらの機能には、C++ 20 の作業ドラフトからの変更、C++ 17 に含まれていない欠陥のある更新、およびドラフト標準の試験的な提案が含まれる場合があります。 サポート対象の言語およびライブラリ機能については、[Visual C++ の新機能](../../overview/what-s-new-for-visual-cpp-in-visual-studio.md)に関するページを参照してください。 オプションは、 **`/std:c++latest`** スイッチによって保護されている機能を有効にしません **`/experimental`** が、有効にする必要がある場合があります。

> [!IMPORTANT]
> によって有効になるコンパイラおよびライブラリの機能は、 **`/std:c++latest`** 将来の c++ 標準で表示される可能性がある機能と、承認された c++ 20 の機能を表します。 承認されていない機能では、破壊的変更や通知なしでの削除が起こる可能性があり、これは無保証で提供されています。

**`/std`** C++ のコンパイル中に有効なオプションは、 [ \_ MSVC \_ LANG](../../preprocessor/predefined-macros.md)プリプロセッサマクロを使用して検出できます。 詳細については、[プリプロセッサ マクロ](../../preprocessor/predefined-macros.md)に関するページを参照してください。

**`/std:c++14`** およびオプションは、 **`/std:c++latest`** Visual Studio 2015 Update 3 以降で使用できます。 この **`/std:c++17`** オプションは、Visual Studio 2017 バージョン15.3 以降で使用できます。 前述のように、一部の C++ 17 標準動作はオプションによって有効になってい **`/std:c++14`** ますが、その他の c++ 17 機能はすべてによって有効になってい **`/std:c++17`** ます。 C++ 20 の機能は **`/std:c++latest`** 、実装が完了するまでによって有効になります。

> [!NOTE]
> MSVC コンパイラのバージョンまたは更新レベルによっては、C++ 17 の機能が完全に実装されていないか、オプションを指定したときに完全に準拠していない可能性があり **`/std:c++17`** ます。 リリースバージョン別の Visual C++ における C++ 言語準拠の概要については、「 [Microsoft c++ 言語準拠テーブル](../../overview/visual-cpp-language-conformance.md)」を参照してください。

### <a name="c-standards-support"></a>C 標準サポート

既定では、コードが C としてコンパイルされると、MSVC コンパイラは特定の C 標準に準拠していません。 複数の Microsoft 拡張機能を備えた ANSI C89 を実装します。一部は ISO C99 に含まれています。 一部の Microsoft 拡張機能は、コンパイラオプションを使用して無効にすることができ [`/Za`](za-ze-disable-language-extensions.md) ますが、その他の拡張機能は有効なままです。 厳密な C89 準拠を指定することはできません。

Visual Studio 2019 バージョン16.8 以降で **`/std:c11`** は、 **`/std:c17`** C としてコンパイルされたコードに対してまたはを指定できます。これらのオプションでは、ISO C11 と ISO C17 に対応する準拠モードが指定されます。 これらの標準をサポートするために新しいプリプロセッサが必要であるため、 **`/std:c11`** **`/std:c17`** オプションとコンパイラオプションによってオプションが自動的に設定され [`/Zc:preprocessor`](zc-preprocessor.md) ます。 C11 または C17 に従来の (レガシ) プリプロセッサを使用する場合は、コンパイラオプションを明示的に設定する必要があり **`/Zc:preprocessor-`** ます。 オプションを設定 **`/Zc:preprocessor-`** すると、予期しない動作が発生する可能性があり、推奨されません。

> [!NOTE]
> リリース時点では、最新の Windows SDK と UCRT ライブラリでは、C11 と C17 のコードがまだサポートされていません。 Windows SDK と UCRT のプレリリースバージョンが必要です。 詳細とインストール手順については、「 [Install C11 And C17 support In Visual Studio](../../overview/install-c17-support.md)」を参照してください。

またはを指定すると **`/std:c11`** **`/std:c17`** 、MSVC は C11 と C17 のすべての必要な機能をサポートします。 コンパイラオプションは、次の機能のサポートを有効にします。

- [`_Pragma`](../../preprocessor/pragma-directives-and-the-pragma-keyword.md#the-_pragma-preprocessing-operator-c99-c11)

- **`restrict`**

- **`_Noreturn`** そして \<stdnoreturn.h>

- **`_Alignas`** 、、 **`_Alignof`** および \<stdalign.h>

- **`_Generic`** そして \<tgmath.h>

- **`_Static_assert`**

IDE では、ソースファイルにファイル拡張子がある場合 *`.c`* 、またはコンパイラオプションを指定した場合に、IntelliSense とコードの強調表示に C の設定が使用され [`/TC`](tc-tp-tc-tp-specify-source-file-type.md) ます。 現在、IntelliSense による強調表示は、標準ヘッダーで導入されたマクロではなく、キーワードでのみ使用できます。

C17 は ISO C11 のバグ修正リリースであるため、MSVC support for C11 には、関連するすべての欠陥レポートが既に含まれています。 現時点では、マクロを除き、C11 と C17 の両方のバージョンに違いはありません `__STDC_VERSION__` 。 C11 の場合は、C17 の場合はに展開さ `201112L` `201710L` れます。

コンパイラは、ISO C11 のオプション機能をサポートしていません。 C11 のこれらのオプション機能のいくつかは、MSVC がアーキテクチャ上の理由で実装されていない C99 の必須機能でした。 などの機能テストマクロを使用して、 `__STDC_NO_VLA__` 個々の機能のコンパイラサポートレベルを検出できます。 C 固有の定義済みマクロの詳細については、「 [定義済みマクロ](../../preprocessor/predefined-macros.md)」を参照してください。

- Visual Studio 2019 バージョン16.8 リリースでは、準拠しているマルチスレッド、アトミック、または複素数のサポートはありません。

- `aligned_alloc` Windows ヒープの実装により、サポートが不足しています。 もう1つの方法は、を使用することです [`_aligned_malloc`](../../c-runtime-library/reference/aligned-malloc.md) 。

- この変更によって ABI が破損するため、現在、DR 400 のサポートはでは実装されてい `realloc` ません。

- 可変長配列 (VLA) のサポートは計画されていません。 可変長配列は、比較可能な固定サイズの配列よりも効率が悪くなることがよくあります。 また、これらは、安全かつ安全に実装されている場合に、同等のヒープメモリ割り当てと比較して非効率的です。 VLAs `gets()` は、非推奨とされ、削除が予定されているに相当する攻撃ベクトルを提供します。

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Visual Studio 開発環境でこのコンパイラ オプションを設定するには

1. プロジェクトの **[プロパティ ページ]** ダイアログ ボックスを開きます。 詳細については、[Visual Studio での C++ コンパイラとビルド プロパティの設定](../working-with-project-properties.md)に関するページを参照してください。

1. **[構成プロパティ]** 、 **[C/C++]** 、 **[言語]** の順に選択します。

1. **C++ 言語標準** (または c **言語標準** の場合) で、ドロップダウンコントロールからサポートする言語標準を選択し、[ **OK]** または [ **適用** ] を選択して変更を保存します。

## <a name="see-also"></a>関連項目

[MSVC コンパイラ オプション](compiler-options.md)<br/>
[MSVC Compiler Command-Line 構文](compiler-command-line-syntax.md)
